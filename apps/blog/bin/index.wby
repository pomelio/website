import ext.web as web;
import std.string as str;

let ppath = web.path();
let appLen = len('/' + __APP__);
let apppath = str.substring(ppath, appLen);

if ppath == '/blog' {
  dispatch(__APP__, '/blogs', {});
} elsif str.ends_with(ppath, '.md') {
  dispatch(__APP__, '/blog', {});
} elsif str.starts_with(apppath, '/public') {
  web.send_file(__APP__, apppath);
} else {
  web.set_status(404);
}
