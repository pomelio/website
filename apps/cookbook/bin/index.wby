import ext.web as web;
import std.string as str;

let ppath = web.path();
let appLen = len('/' + __APP__);
ppath = str.substring(ppath, appLen);

if str.ends_with(ppath, '.md') {
  dispatch(__APP__, '/markdown', {});
} elsif str.starts_with(ppath, '/public') {
  web.send_file(__APP__, ppath);
} else {
  web.set_status(404);
}
